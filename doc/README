Untrusted Test Certificates
===========================

This module was created for two slightly different purposes:
  - provide a simple solution for testing security in normal components
  - provide an extensive set of valid and invalid certificates for testing
    security components

CA certificates
---------------
For both purposes a set of certification authorities are created and 
checked into a CVS as a reference point. These certificate authorities
therefor can be installed as a trust anchor for services and clients.

The CA files are located in the CVS module's 'test' directory. They 
can be regenerated by issuing the 'generate-ca-certificates-for-cvs.sh'
command with the '--i-know-what-i-am-doing' option. Yes, it is intentionally
obscure to avoid re-generation of those certificates.

One should not use these certificate at this location, but copy them to
the stage (or another) location, and generate the rest of the certificates.

The CA types:
    trusted: a working CA
    expired: the CA certificate has an expiration day in the past
    big:     the CA certificate has a long key (4096 bits)
    fake:    the CA certificate is not installed anywhere, thus every
                   certificate depending on this would be fake

Normal Components
-----------------
For normal components just execute
    
    generate-test-certificates.sh $WORKSPACE/stage

It will generate certificates in a CA specific directory, but also
copy it to a structure, which is closer to component configurations:

    $WORKSPACE/stage/
                     grid-security/
                                   hostcert.pem
                                   hostkey.pem
                                   certificates/
                                                5a762d74.0
                                                5a762d74.r0
                                                5a762d74.signing_policy
                     home/
                          usercert.pem
                          userkey.pem

All Certificates
----------------
For security components a more extensive set of certificates can be
generated with the following command

    generate-test-certificates.sh --all $WORKSPACE/stage

It will generate many certificates in CA specific directories, but
not put them to the above mentioned convenient places.

This command will also put the CA cert and signing policy for EACH CA except for the
'fake' CA into:

    $WORKSPACE/stage/
                     grid-security/
                                   certificates/
                                                <CA hash>.0
                                                <CA hash>.signing_policy

trusted_altname.cert - hostname xxx.foo.bar in CN with trusted/ prefix emulating service prefix. altname has DNS:*.hoo.org, DNS:joo.haa.org, IP Address:123.124.220.1, DNS:g*a.e*.com. Should work for corresponding hosts.
trusted_altname_2.cert - hostname xxx.foo.bar in CN. altname has DNS:*.hoo.org, DNS:joo.haa.org, IP Address:123.124.220.1, DNS:g*a.e*.com. Should work for corresponding hosts.
trusted_altname2.cert - hostname of machine where generated only in the altname. Should work.
trusted_altname2_2.cert - hostname of machine where generated both in CN and altname. Should work.
trusted_altname3.cert - altname with email address and no hostname anywhere. should fail as a host certificate.
trusted_altname3_2.cert - altname with email address, but hostname in CN. Should work.